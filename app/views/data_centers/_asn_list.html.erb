<% @results[:results].each do |_, asn_data| %>
  <tr>
    <td>
      <%= link_to asn_data[:asn], asn_url(network: params[:network], asn:asn_data[:asn]) %>
      <p><%= asn_data[:aso] %></p>
    </td>
    <td>
      <%
=begin%>
 <%
        asn_stat = AsnStat.find_by(traits_autonomous_system_number: asn_data[:asn], network: params[:network])
        chart_value = asn_stat&.vote_distance_moving_average <= 20 ? asn_stat.vote_distance_moving_average : 20
      %>
      <%= render 'asn_speedometer',
                  canvas_name: "spark_line_skipped_vote_#{asn_data[:asn]}",
                  value: chart_value,
                  chart_steps: [2.5, 5, 7.5, 10, 20],
                  min_value: 0
      %> 
<%
=end%>
      <div class="text-center">
        <%= AsnStat.find_by(traits_autonomous_system_number: asn_data[:asn], network: params[:network]).vote_distance_moving_average.round(3) %>
      </div>
    </td>
    <td>
      <% asn_data[:data_centers].each do |dc| %>
        <%= link_to dc, data_center_url(network: params[:network], key: dc.gsub('/', '-slash-')) %>
        <br \>
      <% end %>
    </td>
    <td><%= asn_data[:count] %></td>
    <td>
      <%= number_with_delimiter lamports_to_sol(asn_data[:active_stake]).round(0) %>
      (<%= percent_of_total_stake(asn_data[:active_stake], @results[:total_stake]) %>)
    </td>
  </tr>
<% end %>
