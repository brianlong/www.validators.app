<% if @stake_histories.any? %>
  <div class="row">
    <div class="col-xl-8 mb-4">
      <div class="card h-100">
        <div class="card-content">
          <h2 class="h4 card-heading">Active Stake</h2>
          <%= render 'explorer_stake_accounts/stake_stats_large_chart',
                     chart_name: "stake-stats-chart",
                     epochs: @data_for_charts[:epochs],
                     vector: @data_for_charts[:active_stake]
          %>
        </div>
      </div>
    </div>

    <div class="col-xl-4 mb-4">
      <div class="card h-100">
        <div class="card-content">
          <h2 class="h4 card-heading mb-2">Last Epoch</h2>
        </div>
        <table class='table table-block small mb-0'>
          <tbody>
          <tr>
            <td><strong>Stake Accounts:</strong></td>
            <td><%= number_with_delimiter @stake_histories.last.delegating_stake_accounts_count %></td>
          </tr>
            <tr>
              <td><strong>Delegated Stake:</strong></td>
              <td><%= number_with_delimiter lamports_to_sol(@stake_histories.last.delegated_stake.to_i).round(2) %> SOL</td>
            </tr>
            <tr>
              <td><strong>Active Stake:</strong></td>
              <td><%= number_with_delimiter lamports_to_sol(@stake_histories.last.active_stake.to_i).round(2) %> SOL</td>
            </tr>
            <tr>
              <td><strong>Average Active Stake:</strong></td>
              <td><%= number_with_delimiter lamports_to_sol(@stake_histories.last.average_active_stake.to_i).round(2) %> SOL</td>
            </tr>
            <tr>
              <td><strong>Credits Observed:</strong></td>
              <td><%= number_with_delimiter lamports_to_sol(@stake_histories.last.credits_observed.to_i).round(2) %> SOL</td>
            </tr>
            <tr>
              <td><strong>Rent Exempt Reserve:</strong></td>
              <td><%= number_with_delimiter lamports_to_sol(@stake_histories.last.rent_exempt_reserve.to_i).round(2) %> SOL</td>
            </tr>
            <tr>
              <td><strong>Deactivating Stake:</strong></td>
              <td><%= number_with_delimiter lamports_to_sol(@stake_histories.last.deactivating_stake.to_i).round(2) %> SOL</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-4 mb-4">
      <div class="card h-100">
        <div class="card-content">
          <div class="h6 card-heading mb-4">Delegated Stake</div>
          <%= render 'explorer_stake_accounts/stake_stats_small_chart',
                     chart_name: "delegated-stake-chart",
                     epochs: @data_for_charts[:epochs],
                     vector: @data_for_charts[:delegated_stake]
          %>
        </div>
      </div>
    </div>
    <div class="col-lg-4 mb-4">
      <div class="card h-100">
        <div class="card-content">
          <div class="h6 card-heading mb-4">Average Active Stake</div>
          <%= render 'explorer_stake_accounts/stake_stats_small_chart',
                     chart_name: "average-stake-chart",
                     epochs: @data_for_charts[:epochs],
                     vector: @data_for_charts[:average_stake]
          %>
        </div>
      </div>
    </div>
    <div class="col-lg-4 mb-4">
      <div class="card h-100">
        <div class="card-content">
          <div class="h6 card-heading mb-4">Stake Accounts</div>
          <%= render 'explorer_stake_accounts/stake_accounts_chart',
                     chart_name: "stake-accounts-chart",
                     epochs: @data_for_charts[:epochs],
                     vector: @data_for_charts[:stake_accounts_count]
          %>
        </div>
      </div>
    </div>
  </div>
<% end %>
