<h1>API Documentation</h1>
<div class='row'>
  <div class="col-sm-12">
    <p>
      Our API provides several different endpoints to query the validators database. You must have a verified account in order to make requests against the JSON API. Your user account and an API token are used to secure this API. You can create a <%= link_to 'New Account', new_user_registration_path %> or <%= link_to 'Sign In', new_user_session_path %> to see your API token.
    </p>
    <p>NOTE: Despite mentions of 'mainnet' below, we currently have data for only the testnet. Data for mainnet is coming soon.</p>
  </div>
</div>
<h3>Authentication</h3>
<div class="row">
  <div class="col-sm-12">
    <p>Pass your API token in as the Token header, like in this curl example:</p>
    <pre>$ curl -H "Token: secret-api-token" https://www.validators.app/api/v1/ping</pre>
    <p>Examples in this API guide are demonstrated using curl, but you can use an HTTP library of your choice. All responses are JSON.</p>
  </div>
</div>
<hr />
<h4>Ping</h4>
<div class="row">
  <div class="col-sm-12">
    <p>The ping endpoint will allow you to test your connection to the server.</p>
    <p>Request:</p>
    <pre>$ curl -H "Token: secret-api-token" https://www.validators.app/api/v1/ping</pre>
    <p>Response:</p>
    <pre>{"answer":"pong"}</pre>
  </div>
</div>
<hr />
<h4>Ping Times</h4>
<div class="row">
  <div class="col-sm-12">
    <p>The ping-times endpoint will return recent ping times as reported by the participating validators. By default, the most recent 1,000 ping times will be returned. You can include a `limit` parameter to request more or fewer ping times. In the examples below, replace `:network` with 'testnet' or 'mainnet' as desired.</p>
    <p>Request:</p>
    <pre>$ curl -H "Token: secret-api-token" https://www.validators.app/api/v1/ping-times/:network</pre>
    <p>or</p>
    <pre>$ curl -H "Token: secret-api-token" https://www.validators.app/api/v1/ping-times/:network?limit=1</pre>
    <p>Response:</p>
    <p>An Array of response times.</p>
    <pre>
      [
        {
          "id":614598,
          "batch_id":"baf5c581-7ca3-471f-9a86-17a4f3c904a3",
          "network":"testnet",
          "from_account":"71bhKKL89U3dNHzuZVZ7KarqV6XtHEgjXjvJTsguD11B",
          "from_ip":"165.227.100.142",
          "to_account":"HrTZp96AjUbgxFyaJUcWPLe93441D4TuEN1hC14TNTuJ",
          "to_ip":"95.217.226.153",
          "min_ms":"101.706",
          "avg_ms":"101.778",
          "max_ms":"101.872",
          "mdev":"0.396",
          "observed_at":"2020-06-19T12:54:50.000Z",
          "created_at":"2020-06-19T12:54:50.559Z",
          "updated_at":"2020-06-19T12:54:50.559Z"
        },
        ...
      ]
    </pre>
  </div>
</div>
<hr />
<h4>Validators List</h4>
<div class="row">
  <div class="col-sm-12">
    <p>The validators endpoint will return a list of validators for the requested network. In the example below, replace `:network` with 'testnet' or 'mainnet' as desired.</p>
    <p>Request:</p>
    <pre>curl -H "Token: secret-api-token" https://www.validators.app/api/v1/validators/:network</pre>
    <p>Response:</p>
    <p>An Array of validators.</p>
    <pre>
      [
        {
          "network":"testnet",
          "account":"123vij84ecQEKUvQ7gYMKxKwKF6PbYSzCzzURYA4xULY",
          "name":null,
          "keybase_id":null,
          "www_url":null,
          "created_at":"2020-05-24T19:07:38.222Z",
          "updated_at":"2020-05-24T19:07:38.222Z",
          "vote_account":"123JiW1rwJ4JM5BxYqFkBi6wQJ52pt6qUH88JDqrtU9i",
          "software_version":"1.2.3 devbuild",
          "skipped_slots":664,
          "skipped_slot_percent":"0.5155",
          "ping_time":"205.703",
          "skipped_slots_after":655,
          "skipped_slots_after_percent":"0.5085",
          "url":"https://www.validators.app/api/v1/validators/testnet/123vij84ecQEKUvQ7gYMKxKwKF6PbYSzCzzURYA4xULY.json"
        },
        ...
      ]
    </pre>
  </div>
</div>
<hr />
<h4>Validator Detail</h4>
<div class="row">
  <div class="col-sm-12">
    <p>The validators endpoint will return a single validator for the requested network and account. In the example below, replace `:network` with 'testnet' or 'mainnet' as desired. Replace `:account` with the desired account ID.</p>
    <p>Request:</p>
    <pre>curl -H "Token: secret-api-token" https://www.validators.app/api/v1/validators/:network/:account</pre>
    <p>Response:</p>
    <pre>
      {
        "network":"testnet",
        "account":"71bhKKL89U3dNHzuZVZ7KarqV6XtHEgjXjvJTsguD11B",
        "name":null,
        "keybase_id":null,
        "www_url":null,
        "created_at":"2020-05-24T19:07:38.517Z",
        "updated_at":"2020-05-24T19:07:38.517Z",
        "vote_account":"8zipsAVJU28GyirnyUNwt2yjTNuNusq3ZiJoVn41EgJE",
        "software_version":"1.2.3 f1e68ac2",
        "skipped_slots":610,
        "skipped_slot_percent":"0.4904",
        "ping_time":"435.332",
        "skipped_slots_after":613,
        "skipped_slots_after_percent":"0.4928",
        "url":"https://www.validators.app/api/v1/validators/testnet/71bhKKL89U3dNHzuZVZ7KarqV6XtHEgjXjvJTsguD11B.json"
      }
    </pre>
  </div>
</div>
<div class="row">
  <div class="col-am-12">
    <p>NOTE: Version 1 of this API is still in development. Check back here to see updates!</p>
  </div>
</div>
